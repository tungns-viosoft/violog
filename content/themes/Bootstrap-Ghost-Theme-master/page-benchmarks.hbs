{{!< default}}

{{!-- This is a page template. A page outputs content just like any other post, and has all the same
    attributes by default, but you can also customise it to behave differently if you prefer. --}}

{{!-- Everything inside the #post tags pulls data from the page --}}
{{#post}}

{{> "site-header"}}

<script type="text/javascript" src="{{asset "js/Chart.min.js"}}"></script> 
<script type="text/javascript" src="{{asset "js/pechart.js"}}"></script> 



<section class="container">
	<section class="row">
		<div class="col-md-3">
			
		</div>
	</section>
</section>


<section class="container" >
	<section class="row">
		<div class="col-md-9" id="chart-container" >
			
		</div>

		<div class="col-md-3">
			<div class="side-bar filter">
				<header class="filter-header">
					Hardware branch
				</header>
				<div class="filter-content">
					abc
				</div>
			</div>
			
		</div>
	</section>

</section>

<script type="text/javascript">

	var database = {};
    var usecases = []; //usecase model to present data

    var canvases = {};

	$.get("http://192.168.0.220:1337/api/performance", function(data, status) {
        
        $.each(data, function(i, val){
            if(!usecases.includes(val.usecase)){
                usecases.push(val.usecase);
            }
            database[val.id] = val;
        });

        init(data[0].size);
        render();
    });


	function filter(){

	}


	function render(){

		var container = $('#chart-container');
		container.empty();

		$.each(database, function(i, val){
			var canvasId = 'canvas-' + i;


			var chartPanel = '<div class="chart-pos">'
			+ '<canvas class="chart-canvas" id="' + canvasId +  '" />'
			+ '</div>';

			var chartInfo = '<div class="table-pos">' 			
			+ '<table class="info-table info-hardware">'
			+ '<tr>'
			+ '<th colspan="2">Hardware</th>'
			+ '</tr>';


			$.each(val.vnf.hw, function(i,val){
				chartInfo += '<tr>'
				+ '<td>'

				+	i
				
				+ '</td>'
				+ '<td>'

				+ 	val
				
				+ '</td>'
				+ '</tr>'
			});
		
			// chartInfo += '</table>'
			// + '</div>';

			chartInfo += '<tr>'
			+ '<th colspan="2">Software</th>'
			+ '</tr>';

			$.each(val.vnf.sw, function(i,val){
				chartInfo += '<tr>'
				+ '<td>'

				+	val.name
				
				+ '</td>'
				+ '<td>'

				+ 	val.version
				
				+ '</td>'
				+ '</tr>'
			});		

			chartInfo += '</table>'
			+ '</div>';


			var chartRow = '<div class="row-chart"> ' 
			+ chartPanel 
			+ chartInfo
			+ '</div>';

			var $chartRow = $(chartRow).hide().fadeIn(1000);
			
			container.append($chartRow);



			var myChart = loadChart(canvasId);
			addChart(val, myChart);
			canvases[canvasId] = myChart;
		});

		//$('#canvas-2').closest('div.row-chart-benchmarks').css('display', 'none');
	}




	

</script>


{{/post}}